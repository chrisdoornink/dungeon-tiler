:root {
  --tile-size: 40px; /* 10 * 4px (tailwind w-10 h-10 equivalent) */
  /* Dark forest theme colors */
  --floor-bg: #2a3328; /* Deep forest floor green-brown */
  --wall-top: #3a4a3e; /* Mossy stone top */
  --wall-side: #2c3a30; /* Darker moss-covered stone sides */
  --wall-bottom: #1a2a20; /* Deep shadow with forest tint */
  --edge-highlight: #4c5a4e; /* Subtle forest-tinted highlight */
  --perspective-base: #162018; /* Deep forest shadow */
  --overgrown-grass: #3f5a46; /* Desaturated mossy green */
  --dirt-path: #3d3426; /* Dark earthy forest path */
  --forest-accent: #4d6356; /* Forest accent for details */
  --forest-dark: #1e2a22; /* Deep forest shadow */
}

.tileContainer {
  position: relative;
  width: var(--tile-size);
  height: var(--tile-size);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

/* Visibility tiers (kept as global tokens so tests can still see class names if needed) */
:global(.fov-tier-3) { filter: none; }
:global(.fov-tier-2) { filter: brightness(0.85); }
:global(.fov-tier-1) { filter: brightness(0.7); }

/* Keep border-b-8 token globally to satisfy tests and non-Tailwind runtime */
:global(.border-b-8) { border-bottom-width: 8px !important; border-bottom-style: solid; }
:global(.border-b-4) { border-bottom-width: 4px !important; border-bottom-style: solid; }
:global(.border-b-2) { border-bottom-width: 2px !important; border-bottom-style: solid; }
:global(.border-b-0) { border-bottom-width: 0px !important; border-bottom-style: solid; }

/* Specific color utility token we referenced */
:global(.border-b-\[\#1f1f1f\]) { border-bottom-color: var(--perspective-base) !important; }

/* Tailwind token used by tests for invisible tiles */
:global(.bg-gray-900) { background-color: #111827 !important; }

.floor {
  background-color: var(--floor-bg);
  background-image: url('/images/floor-try-1.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  position: relative;
  /* Add a subtle blend to integrate with the forest theme */
  box-shadow: inset 0 0 10px rgba(26, 42, 32, 0.4);
}

/* Add subtle moss overlay to floor tiles */
.floor::after {
  content: "";
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 30% 70%, rgba(63,90,70,0.15) 0%, rgba(63,90,70,0) 30%),
    radial-gradient(circle at 80% 20%, rgba(63,90,70,0.1) 0%, rgba(63,90,70,0) 25%);
  mix-blend-mode: overlay;
  pointer-events: none;
}

.wall {
  background-color: var(--wall-top);
  border: 1px solid var(--wall-side);
}

/* Wall with asset image - no borders or additional styling */
.wallWithAsset {
  background-color: transparent;
  border: none;
}

.wallInsetTexture {
  position: absolute;
  inset: 4px;
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 2px;
  /* Forest-themed texture with subtle moss effect */
  background: 
    linear-gradient(to bottom, rgba(63,90,70,0.08), rgba(26,42,32,0.12)),
    repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(77,99,86,0.03) 4px, rgba(77,99,86,0.03) 5px);
}

/* Subtype icons container */
.subtypeContainer {
  position: absolute;
  inset: 0;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 2px;
  padding: 2px;
  pointer-events: none;
}

/* Individual subtype icon */
.subtypeIcon {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  font-size: 10px;
  font-weight: bold;
  color: white;
  text-shadow: 0px 0px 2px rgba(0,0,0,0.8);
}

/* Asset-based subtype icons */
.assetIcon {
  width: 24px;
  height: 24px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
}

.closedChestIcon {
  background-image: url('/images/items/closed-chest.png');
}

.openedChestIcon {
  background-image: url('/images/items/opened-chest.png');
}

.switchIcon {
  background-image: url('/images/items/switch.png');
}

/* Variant: wall_pillar (front perspective) */
.wallPillar {
  /* 70% bottom base for strong perspective: 28px on 40px tile */
  border-bottom-width: calc(var(--tile-size) * 0.7);
  border-bottom-style: solid;
  border-bottom-color: var(--wall-bottom); /* bottom face derived from top */

  /* Thin side faces (front view) */
  border-left: 2px solid var(--wall-side);
  border-right: 2px solid var(--wall-side);
}

/* Helpers for other variants */
.wallBase70 {
  border-bottom-width: calc(var(--tile-size) * 0.7);
  border-bottom-style: solid;
  border-bottom-color: var(--wall-bottom);
}

.wallEdgeL {
  border-left: 2px solid var(--wall-side);
}

.wallEdgeR {
  border-right: 2px solid var(--wall-side);
}

/* Edge highlights when no same-type neighbor - forest style */
.wallTopHighlight::after {
  content: "";
  position: absolute;
  top: 0;
  left: 2px;
  right: 2px;
  height: 1px;
  background: linear-gradient(to right, 
    transparent, 
    var(--edge-highlight), 
    var(--forest-accent), 
    var(--edge-highlight), 
    transparent
  );
}

.wallRightHighlight::before {
  content: "";
  position: absolute;
  top: 2px;
  bottom: 2px;
  right: 0;
  width: 1px;
  background: linear-gradient(to bottom, 
    transparent, 
    var(--edge-highlight), 
    var(--forest-accent), 
    var(--edge-highlight), 
    transparent
  );
}

.wallLeftHighlight::before {
  content: "";
  position: absolute;
  top: 2px;
  bottom: 2px;
  left: 0;
  width: 1px;
  background: linear-gradient(to bottom, 
    transparent, 
    var(--edge-highlight), 
    var(--forest-accent), 
    var(--edge-highlight), 
    transparent
  );
}

/* Exaggerated base shadow strip */
.wallBaseShadow {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 8px; /* stronger visual than h-2 */
  background: linear-gradient(
    to bottom,
    color-mix(in srgb, var(--wall-bottom) 20%, #000 0%) 0%,
    color-mix(in srgb, var(--wall-bottom) 75%, #000 25%) 100%
  );
}

.player {
  background: #3b82f6; /* blue-500 */
  color: white;
}

.invisible {
  background: #111827; /* gray-900 */
}
